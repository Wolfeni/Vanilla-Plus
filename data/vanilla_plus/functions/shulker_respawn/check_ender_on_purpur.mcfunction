execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_enderman,type=minecraft:enderman,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_block unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_enderman
execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_enderman,type=minecraft:enderman,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_stairs unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_enderman
execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_enderman,type=minecraft:enderman,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_slab unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_enderman
execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_enderman,type=minecraft:enderman,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_pillar unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_enderman

execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_endermite,type=minecraft:endermite,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_block unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_endermite
execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_endermite,type=minecraft:endermite,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_stairs unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_endermite
execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_endermite,type=minecraft:endermite,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_slab unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_endermite
execute in minecraft:the_end positioned 0 0 0 as @a[distance=0..] at @s run execute as @e[tag=!old_endermite,type=minecraft:endermite,distance=24..130,sort=random,limit=2] at @s if block ~ ~-1 ~ minecraft:purpur_pillar unless entity @e[distance=0..5,type=minecraft:shulker] run tag @s add old_endermite

execute at @e[tag=old_enderman] run function vanilla_plus:shulker_respawn/shulker_respawn_and_kill
execute at @e[tag=old_endermite] run function vanilla_plus:shulker_respawn/shulker_respawn_and_kill